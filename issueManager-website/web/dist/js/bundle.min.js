angular.module("templates",[]);var app=angular.module("app",["ngRoute","ngCookies","ngStorage","templates"]);app.config(["$routeProvider","$locationProvider","$httpProvider",function(t,r,n){n.interceptors.push(["$q","$rootScope","$location",function(t,r,n){return{responseError:function(e){var o=e.status,a=e.config.method,i=e.config.url;return 401==o?n.path("/login"):r.error=a+" on "+i+" failed with status "+o,t.reject(e)}}}]),n.interceptors.push(["$q","$rootScope","$location","$cookieStore","$localStorage",function(t,r,n,e,o){return{request:function(t){var r=o.userToken;console.log(r);var e=n.path();return n.path("/login"),angular.isDefined(r)&&null!==r&&n.path(e),angular.isDefined(r)&&(t.headers["X-AUTH-TOKEN"]=JSON.stringify(r)),angular.isDefined(r)&&"/login"===n.path()&&n.path("/"),t}}}])}]),app.run(["$rootScope","$location","$cookieStore","UserService",function(t,r,n,e){t.$on("$viewContentLoaded",function(){delete t.error}),t.hasRole=function(r){return void 0!==t.user&&(void 0!==t.user.roles[r]&&t.user.roles[r])},t.logout=function(){delete t.user,delete t.userToken,n.remove("userToken"),r.path("/login")},t.initialized=!0}]),app.controller("MainController",["$scope","$cookieStore","UserService","$location","$rootScope","$localStorage",function(t,r,n,e,o,a){t.isAuthenticated=function(){var t=a.userToken;return angular.isDefined(t)&&null!==t},t.logout=function(){n.logout().then(function(t){delete o.userToken,delete a.userToken,e.path("/login")})}}]),app.constant("propertiesConstant",{API_URL:"http://127.0.0.1:8080/issueManager-services"}),app.constant("storageConstant",{USER:"user",AUTH_TOKEN:"authToken"}),app.service("authenticationService",["$rootScope","$http","$q","base64Service","storageService","storageConstant","propertiesConstant",function(t,r,n,e,o,a,i){var l=function(o){var a=n.defer();r.defaults.headers.common.Authorization="Basic "+e.encode(o.login+":"+o.password);var l={login:o.login,password:o.password};return r.post(i.API_URL+"/auth/login",l).success(function(r){var n=r.data.token;t.accessToken=n,a.resolve()}).error(function(){a.reject()}),a.promise},s=function(){var e=n.defer();return r.post(i.API_URL+"/auth/logout",null).success(function(){o.removeSessionItem(a.AUTH_TOKEN),o.removeSessionItem(a.USER),delete t.user,e.resolve()}).error(function(){e.reject()}),e.promise};return{login:l,logout:s}}]),app.service("base64Service",function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(r){for(var n,e,o,a,i,l="",s="",d="",c=0;c<r.length;)n=r.charCodeAt(c++),e=r.charCodeAt(c++),s=r.charCodeAt(c++),o=n>>2,a=(3&n)<<4|e>>4,i=(15&e)<<2|s>>6,d=63&s,isNaN(e)?i=d=64:isNaN(s)&&(d=64),l=l+t.charAt(o)+t.charAt(a)+t.charAt(i)+t.charAt(d),n=e=s="",o=a=i=d="";return l},this.decode=function(r){var n,e,o,a,i,l="",s="",d="",c=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<r.length;)o=t.indexOf(r.charAt(c++)),a=t.indexOf(r.charAt(c++)),i=t.indexOf(r.charAt(c++)),d=t.indexOf(r.charAt(c++)),n=o<<2|a>>4,e=(15&a)<<4|i>>2,s=(3&i)<<6|d,l+=String.fromCharCode(n),64!=i&&(l+=String.fromCharCode(e)),64!=d&&(l+=String.fromCharCode(s)),n=e=s="",o=a=i=d=""}}),app.service("messageService",["$rootScope",function(t){t.errors=[],t.alerts=[],this.error=function(r,n){t.errors.push({code:r,message:n})},this.info=function(r,n){t.alerts.push({code:r,message:n})},this.clearError=function(){t.errors=[]},this.clearInfo=function(){t.alerts=[]}}]),app.service("storageService",["$rootScope","$window",function(t,r){this.getLocalItem=function(t){return JSON.parse(r.localStorage.getItem(t))},this.setLocalItem=function(t,n){r.localStorage.setItem(t,JSON.stringify(n))},this.removeLocalItem=function(t){r.localStorage.removeItem(t)},this.getSessionItem=function(t){return JSON.parse(r.sessionStorage.getItem(t))},this.setSessionItem=function(t,n){r.sessionStorage.setItem(t,JSON.stringify(n))},this.removeSessionItem=function(t){r.sessionStorage.removeItem(t)}}]),app.service("UserService",["propertiesConstant","$http",function(t,r){var n=function(n){var e=t.API_URL+"/authentication/login";return r({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:n})},e=function(){return r.get(t.API_URL+"/authentication/current")},o=function(){var n=t.API_URL+"/authentication/logout";return r.get(n)};return{login:n,get:e,logout:o}}]),app.config(["$routeProvider",function(t){t.when("/login",{templateUrl:"common/login/login.html"})}]),app.controller("LoginController",["$location","$rootScope","$scope","UserService","$cookieStore","$localStorage",function(t,r,n,e,o,a){n.credentials={},n.login=function(){var r=$.param({login:n.credentials.login,password:n.credentials.password});console.log("data",r),e.login(r).then(function(r){var e=r.data;a.userToken=e,o.put("userToken",e),n.rememberMe&&o.put("userToken",e),t.path("/")})}}]),app.config(["$routeProvider",function(t){t.when("/hello",{templateUrl:"features/hello/hello.html"})}]),app.controller("HelloCtrl",["$scope","$http",function(t,r){var n=t;n.hello="hello world",n.version=null;$(document).ready(function(){$("#example").DataTable({autoFill:!1})})}]),app.config(["$routeProvider",function(t){t.when("/",{templateUrl:"features/home/home.html"})}]),app.controller("HomeController",["$scope","$http",function(t,r){}]),angular.module("templates").run(["$templateCache",function(t){t.put("index.html",'<!doctype html>\r\n<html>\r\n<head>\r\n    <meta charset="utf-8">\r\n    <link href="css/vendor.min.css" rel="stylesheet" />\r\n    <script src="js/vendor.min.js"></script>\r\n    <script src="js/bundle.min.js"></script>\r\n</head>\r\n<body ng-app="app" ng-controller="MainController as MainCtrl">\r\n\r\n  <div ng-if="isAuthenticated()">\r\n    <!-- header -->\r\n    <div id="top-nav" ng-include="\'template/header.html\'"></div>\r\n    <!-- /Header -->\r\n\r\n    <!-- Main -->\r\n    <div id="main" class="container" style="padding-top: 120px;">\r\n      <div class="row">\r\n        <div ng-view></div>\r\n      </div>\r\n    </div>\r\n    <!--/main-->\r\n  </div>\r\n\r\n  <div ng-if="!isAuthenticated()">\r\n    <div ng-view></div>\r\n  </div>\r\n\r\n</body>\r\n</html>'),t.put("template/header.html",'<!-- Navigation -->\r\n<div class="navbar navbar-default navbar-fixed-top" \r\n      role="navigation" style="margin-top: 0;margin-bottom:0 ">\r\n\r\n  <div class="row"> \r\n    <div class="navbar-header" style="margin-left: 15px">\r\n      <a class="navbar-brand">ISSUE MANAGER</a>\r\n    </div>\r\n    <div>            \r\n      <ul class="nav navbar-right" style="margin-right: 17px">\r\n        <li class="dropdown">\r\n          <a href="" class="dropdown-toggle active" data-toggle="dropdown">\r\n              <i class="fa fa-user fa-fw"></i> \r\n              <i class="fa fa-caret-down"></i>\r\n          </a>\r\n          <ul class="dropdown-menu dropdown-user in">\r\n            <li><a href="#" class="active"><i class="fa fa-user fa-fw"></i> \r\n            User Profile\r\n            </a>\r\n            </li>\r\n            <li><a href="#" class="active"><i class="fa fa-gear fa-fw"></i> Settings</a>\r\n            </li>\r\n            <li class="divider"></li>\r\n            <li><a href="" ng-click="logout()"><i class="fa fa-sign-out fa-fw"></i> Logout</a>\r\n            </li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n\r\n \r\n  <div class="row collapse navbar-collapse">\r\n    <ul class="nav navbar-nav">\r\n      <li><a href="#/" class="fa fa-home">Home</a></li>\r\n      <li><a href="#/hello">Persons</a></li>\r\n      <li><a href="#/">About</a></li>\r\n      <li><a href="#/">Contact</a></li>\r\n    </ul>\r\n  </div>\r\n \r\n</div>\r\n\r\n'),t.put("common/login/login.html",'<div ng-controller="LoginController">\r\n  <div class="container vcenter" >\r\n    <div class="row">\r\n      <div class="col-md-4 col-md-offset-4">\r\n        <div class="panel panel-default" style="margin-top: 25%;">\r\n          <div class="panel-heading">\r\n              <h3 class="panel-title">Please Sign In</h3>\r\n          </div>\r\n          <div class="panel-body">\r\n            <form role="form">\r\n              <fieldset>\r\n                  <div class="form-group">\r\n                    <input class="form-control" placeholder="username" name="username"\r\n                      ng-model="credentials.login" autofocus>\r\n                  </div>\r\n                  <div class="form-group">\r\n                    <input class="form-control" placeholder="Password" name="password" \r\n                    type="password" ng-model="credentials.password">\r\n                  </div>\r\n                  <div class="checkbox">\r\n                    <label>\r\n                        <input name="remember" type="checkbox" ng-model="rememberMe">Remember Me\r\n                    </label>\r\n                  </div>\r\n                  <a ng-click="login(credentials)" class="btn btn-lg btn-success btn-block">Login</a>\r\n              </fieldset>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'),t.put("features/hello/hello.html",'<div ng-controller="HelloCtrl">\r\n\t\t<div class="row">\r\n\t\t  <div class="col-md-6"> \r\n\t\t    <table id="example" cellspacing="0" width="100%" class="table table-striped table-bordered table-condensed">\r\n\t\t\t    <thead>\r\n\t\t            <tr>\r\n\t\t                <th>Name</th>\r\n\t\t                <th>Position</th>\r\n\t\t                <th>Office</th>\r\n\t\t                <th>Age</th>\r\n\t\t                <th>Start date</th>\r\n\t\t                <th>Salary</th>\r\n\t\t            </tr>\r\n\t            </thead>\r\n\t\t        <tbody>\r\n\t\t            <tr>\r\n\t\t                <td>Tiger Nixon</td>\r\n\t\t                <td>System Architect</td>\r\n\t\t                <td>Edinburgh</td>\r\n\t\t                <td>61</td>\r\n\t\t                <td>2011/04/25</td>\r\n\t\t                <td>$320,800</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Garrett Winters</td>\r\n\t\t                <td>Accountant</td>\r\n\t\t                <td>Tokyo</td>\r\n\t\t                <td>63</td>\r\n\t\t                <td>2011/07/25</td>\r\n\t\t                <td>$170,750</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Ashton Cox</td>\r\n\t\t                <td>Junior Technical Author</td>\r\n\t\t                <td>San Francisco</td>\r\n\t\t                <td>66</td>\r\n\t\t                <td>2009/01/12</td>\r\n\t\t                <td>$86,000</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Cedric Kelly</td>\r\n\t\t                <td>Senior Javascript Developer</td>\r\n\t\t                <td>Edinburgh</td>\r\n\t\t                <td>22</td>\r\n\t\t                <td>2012/03/29</td>\r\n\t\t                <td>$433,060</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Airi Satou</td>\r\n\t\t                <td>Accountant</td>\r\n\t\t                <td>Tokyo</td>\r\n\t\t                <td>33</td>\r\n\t\t                <td>2008/11/28</td>\r\n\t\t                <td>$162,700</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Brielle Williamson</td>\r\n\t\t                <td>Integration Specialist</td>\r\n\t\t                <td>New York</td>\r\n\t\t                <td>61</td>\r\n\t\t                <td>2012/12/02</td>\r\n\t\t                <td>$372,000</td>\r\n\t\t            </tr>\r\n\t\t            <tr>\r\n\t\t                <td>Herrod Chandler</td>\r\n\t\t                <td>Sales Assistant</td>\r\n\t\t                <td>San Francisco</td>\r\n\t\t                <td>59</td>\r\n\t\t                <td>2012/08/06</td>\r\n\t\t                <td>$137,500</td>\r\n\t\t            </tr>\r\n\t\t\t\t</tbody>\r\n\t\t    </table>\r\n\t\t   </div>\r\n\t\t</div>\r\n</div>\r\n\r\n\r\n'),t.put("features/home/home.html",'<div ng-controller="HomeController as HomeCtrl">\r\n<h4>Welcome to ISSUE MANAGER Application</h4>\r\n</div>')}]);
//# sourceMappingURL=bundle.min.js.map
